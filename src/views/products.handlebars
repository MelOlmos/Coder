<div>
  <h1>Products result</h1>
{{#each products}}
    <ul>
      <li><strong>Title:</strong> {{this.title}}</li>
      <li><strong>Descripcion:</strong> {{this.description}}</li>
      <li><strong>Category:</strong> {{this.category}}</li>
      <li><strong>Price:</strong> {{this.price}}</li>
    </ul>

    <button onclick="addToCart('{{this._id}}')">Agregar al carrito</button>
    <div id='{{this._id}}'></div>
  {{/each}}

<script>

  // Esto hace la acción onclick
  function addToCart(productId) {
    fetch(`/api/carts/65b3fd56c512050429ca55ec/products/`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ quantity: 1 }),
    })
    .then(response => response.json())
    .then(data => {
      document.getElementById(productId).innerHTML = "Producto agregado correctamente ✔";
      console.log('Producto agregado al carrito:', data);
    })
    .catch(error => console.error('Error al agregar al carrito:', error));
  }
</script>
<div>
{{#if hasPrevPage}}
    <a href="/products?page={{prevPage}}">Before</a>
    {{/if}}
    <label> {{page}} </label>
    {{#if hasNextPage}}
    <a href="/products?page={{nextPage}}">Next</a>
    {{/if}}
</div>
</div>